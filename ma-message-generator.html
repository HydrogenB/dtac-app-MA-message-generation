<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maintenance Announcement Generator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            margin-bottom: 20px;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
        }

        .header h1 {
            font-size: 32px;
            margin-bottom: 10px;
        }

        .header p {
            opacity: 0.9;
            font-size: 14px;
        }

        .content {
            padding: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
            font-size: 14px;
        }

        .form-group input[type="date"],
        .form-group input[type="time"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            margin-top: 20px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .btn:active {
            transform: translateY(0);
        }

        .messages-section {
            display: none;
            margin-top: 30px;
        }

        .messages-section.show {
            display: block;
        }

        .message-card {
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .message-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .message-labels {
            display: flex;
            gap: 8px;
        }

        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .badge-primary {
            background: #667eea;
            color: white;
        }

        .badge-secondary {
            background: #764ba2;
            color: white;
        }

        .badge-outline {
            background: white;
            border: 2px solid #e2e8f0;
            color: #4a5568;
        }

        .message-text {
            background: white;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            color: #2d3748;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .copy-btn {
            background: white;
            border: 2px solid #e2e8f0;
            color: #4a5568;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .copy-btn:hover {
            border-color: #667eea;
            color: #667eea;
        }

        .copy-btn.copied {
            background: #48bb78;
            color: white;
            border-color: #48bb78;
        }

        .copy-all-btn {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            margin-top: 20px;
        }

        .copy-all-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(72, 187, 120, 0.3);
        }

        .warning {
            background: #fef3c7;
            border: 2px solid #fbbf24;
            color: #92400e;
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 14px;
        }

        .info-box {
            background: #e0e7ff;
            border: 2px solid #818cf8;
            color: #3730a3;
            padding: 12px 16px;
            border-radius: 8px;
            margin-top: 20px;
            font-size: 13px;
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 24px;
            }

            .content {
                padding: 20px;
            }
        }

        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #48bb78;
            color: white;
            padding: 16px 24px;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            display: none;
            animation: slideIn 0.3s ease;
            z-index: 1000;
        }

        .toast.show {
            display: block;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="card">
            <div class="header">
                <h1>🔧 Maintenance Announcement Generator</h1>
                <p>Generate Pre-MA and MA Mode announcements in TH and EN (use EN text for EN/MY/KM)</p>
            </div>
            
            <div class="content">
                <form id="messageForm">
                    <div class="form-group">
                        <label for="maintenanceDate">Maintenance Date *</label>
                        <input type="date" id="maintenanceDate" required>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="startTime">Start Time *</label>
                            <input type="time" id="startTime" required>
                        </div>
                        <div class="form-group">
                            <label for="endTime">End Time *</label>
                            <input type="time" id="endTime" required>
                        </div>
                    </div>

                    <div id="warningBox" class="warning" style="display: none;"></div>

                    <button type="submit" class="btn">Generate Messages</button>
                </form>

                <div id="messagesSection" class="messages-section">
                    <h2 style="margin-bottom: 20px; color: #2d3748;">Generated Messages</h2>
                    
                    <!-- Pre-MA TH -->
                    <div class="message-card">
                        <div class="message-header">
                            <div class="message-labels">
                                <span class="badge badge-primary">Pre-MA</span>
                                <span class="badge badge-outline">TH</span>
                            </div>
                            <button class="copy-btn" onclick="copyMessage('preTH')">Copy</button>
                        </div>
                        <div class="message-text" id="preTH"></div>
                    </div>

                    <!-- Pre-MA EN -->
                    <div class="message-card">
                        <div class="message-header">
                            <div class="message-labels">
                                <span class="badge badge-primary">Pre-MA</span>
                                <span class="badge badge-outline">EN/MY/KM</span>
                            </div>
                            <button class="copy-btn" onclick="copyMessage('preEN')">Copy</button>
                        </div>
                        <div class="message-text" id="preEN"></div>
                    </div>

                    <!-- MA Mode TH -->
                    <div class="message-card">
                        <div class="message-header">
                            <div class="message-labels">
                                <span class="badge badge-secondary">MA Mode</span>
                                <span class="badge badge-outline">TH</span>
                            </div>
                            <button class="copy-btn" onclick="copyMessage('maTH')">Copy</button>
                        </div>
                        <div class="message-text" id="maTH"></div>
                    </div>

                    <!-- MA Mode EN -->
                    <div class="message-card">
                        <div class="message-header">
                            <div class="message-labels">
                                <span class="badge badge-secondary">MA Mode</span>
                                <span class="badge badge-outline">EN/MY/KM</span>
                            </div>
                            <button class="copy-btn" onclick="copyMessage('maEN')">Copy</button>
                        </div>
                        <div class="message-text" id="maEN"></div>
                    </div>

                    <button class="copy-all-btn" onclick="copyAllMessages()">📋 Copy All Messages</button>

                    <div class="info-box">
                        <strong>ℹ️ Note:</strong> All messages follow the official format with proper Thai Buddhist Era (BE) dates and English Gregorian dates.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="toast" class="toast"></div>

    <script>
        // Thai weekday mapping
        const weekdayEnToTh = {
            'Sunday': 'วันอาทิตย์',
            'Monday': 'วันจันทร์',
            'Tuesday': 'วันอังคาร',
            'Wednesday': 'วันพุธ',
            'Thursday': 'วันพฤหัสบดี',
            'Friday': 'วันศุกร์',
            'Saturday': 'วันเสาร์'
        };

        // Thai month abbreviations
        const monthNumToThAbbr = {
            1: 'ม.ค.', 2: 'ก.พ.', 3: 'มี.ค.', 4: 'เม.ย.', 5: 'พ.ค.', 6: 'มิ.ย.',
            7: 'ก.ค.', 8: 'ส.ค.', 9: 'ก.ย.', 10: 'ต.ค.', 11: 'พ.ย.', 12: 'ธ.ค.'
        };

        // English month names
        const monthNames = [
            'January', 'February', 'March', 'April', 'May', 'June',
            'July', 'August', 'September', 'October', 'November', 'December'
        ];

        // English weekday names
        const weekdayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];

        // Format Thai date
        function formatThaiDate(date) {
            const weekdayEn = weekdayNames[date.getDay()];
            const thaiWeekday = weekdayEnToTh[weekdayEn];
            const dayTh = date.getDate();
            const monthNum = date.getMonth() + 1;
            const monthTh = monthNumToThAbbr[monthNum];
            const yearThBe = date.getFullYear() + 543;
            
            return `${thaiWeekday}ที่ ${dayTh} ${monthTh} ${yearThBe}`;
        }

        // Format English date
        function formatEnglishDate(date) {
            const weekday = weekdayNames[date.getDay()];
            const day = date.getDate();
            const month = monthNames[date.getMonth()];
            const year = date.getFullYear();
            
            return `${weekday}, ${day} ${month} ${year}`;
        }

        // Pad time with zero
        function pad2(n) {
            return String(n).padStart(2, '0');
        }

        // Store generated messages
        let generatedMessages = {};

        // Set default date and times
        window.addEventListener('DOMContentLoaded', () => {
            const today = new Date();
            const dateInput = document.getElementById('maintenanceDate');
            const startTimeInput = document.getElementById('startTime');
            const endTimeInput = document.getElementById('endTime');

            // Set today as default date
            const year = today.getFullYear();
            const month = pad2(today.getMonth() + 1);
            const day = pad2(today.getDate());
            dateInput.value = `${year}-${month}-${day}`;
            dateInput.min = `${year}-${month}-${day}`;

            // Set default times (next hour to 3 hours later)
            const nextHour = (today.getHours() + 1) % 24;
            const endHour = (today.getHours() + 4) % 24;
            startTimeInput.value = `${pad2(nextHour)}:00`;
            endTimeInput.value = `${pad2(endHour)}:00`;
        });

        // Form submission
        document.getElementById('messageForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const dateValue = document.getElementById('maintenanceDate').value;
            const startTime = document.getElementById('startTime').value;
            const endTime = document.getElementById('endTime').value;

            if (!dateValue || !startTime || !endTime) {
                showToast('Please fill in all fields', 'error');
                return;
            }

            // Parse date and times
            const [year, month, day] = dateValue.split('-').map(Number);
            const [startHour, startMinute] = startTime.split(':').map(Number);
            const [endHour, endMinute] = endTime.split(':').map(Number);

            const startDate = new Date(year, month - 1, day, startHour, startMinute);
            const endDate = new Date(year, month - 1, day, endHour, endMinute);

            // Check if crosses day
            const crossesDay = startTime >= endTime;
            if (crossesDay) {
                endDate.setDate(endDate.getDate() + 1);
                document.getElementById('warningBox').style.display = 'block';
                document.getElementById('warningBox').textContent = '⚠️ This maintenance window crosses midnight into the next day.';
            } else {
                document.getElementById('warningBox').style.display = 'none';
            }

            // Format dates
            const thaiDate = formatThaiDate(startDate);
            const englishDate = formatEnglishDate(startDate);
            const startTimeStr = `${pad2(startHour)}:${pad2(startMinute)}`;
            const endTimeStr = `${pad2(endHour)}:${pad2(endMinute)}`;

            // Generate messages
            const crossDaySuffix = crossesDay ? ' ของวันถัดไป' : '';
            const crossDaySuffixEN = crossesDay ? ' of the following day' : '';

            const preMA_TH = `เรียนลูกค้าที่เคารพ ดีแทคแอปจะปิดปรับปรุงเพื่อบริการที่ดียิ่งขึ้นใน${thaiDate} เวลา ${startTimeStr} – ${endTimeStr}${crossDaySuffix} ขออภัยในความไม่สะดวก`;
            const preMA_EN = `Dear customers, please note that dtac app will be closed for upgrading the service on ${englishDate}, from ${startTimeStr} until ${endTimeStr}${crossDaySuffixEN}. We sincerely apologize for the inconvenience.`;
            const maMode_TH = `ขณะนี้ dtac app กำลังปิดปรับปรุงเพื่อพัฒนาการให้บริการ ใน${thaiDate} เวลา ${startTimeStr} – ${endTimeStr}${crossDaySuffix} ขออภัยในความไม่สะดวก`;
            const maMode_EN = `dtac app is now upgrading the service on ${englishDate}, from ${startTimeStr} until ${endTimeStr}${crossDaySuffixEN}. We sincerely apologize for the inconvenience.`;

            // Store messages
            generatedMessages = {
                preTH: preMA_TH,
                preEN: preMA_EN,
                maTH: maMode_TH,
                maEN: maMode_EN
            };

            // Display messages
            document.getElementById('preTH').textContent = preMA_TH;
            document.getElementById('preEN').textContent = preMA_EN;
            document.getElementById('maTH').textContent = maMode_TH;
            document.getElementById('maEN').textContent = maMode_EN;

            // Show messages section
            document.getElementById('messagesSection').classList.add('show');

            // Scroll to messages
            document.getElementById('messagesSection').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        });

        // Copy individual message
        function copyMessage(messageId) {
            const text = generatedMessages[messageId];
            if (!text) return;

            navigator.clipboard.writeText(text).then(() => {
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = '✓ Copied';
                btn.classList.add('copied');
                
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.classList.remove('copied');
                }, 2000);

                showToast('Message copied to clipboard!');
            }).catch(err => {
                showToast('Failed to copy message', 'error');
            });
        }

        // Copy all messages
        function copyAllMessages() {
            const allText = `Pre-MA Announcement
TH:  ${generatedMessages.preTH}
EN (also for MY/KM):  ${generatedMessages.preEN}

MA Mode (during maintenance)
TH: ${generatedMessages.maTH}
EN (also for MY/KM): ${generatedMessages.maEN}`;

            navigator.clipboard.writeText(allText).then(() => {
                showToast('All messages copied to clipboard!');
            }).catch(err => {
                showToast('Failed to copy messages', 'error');
            });
        }

        // Show toast notification
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.style.background = type === 'error' ? '#ef4444' : '#48bb78';
            toast.classList.add('show');

            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }
    </script>
</body>
</html>
